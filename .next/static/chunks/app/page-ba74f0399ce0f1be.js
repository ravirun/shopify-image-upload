(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{2035:(e,t,s)=>{Promise.resolve().then(s.bind(s,1404))},1404:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>c});var r=s(5155),o=s(2115),a=s(6046),l=s(2651);let n=()=>{let[e,t]=(0,o.useState)([]),[s,a]=(0,o.useState)(""),[n,c]=(0,o.useState)(!1),[i,d]=(0,o.useState)("https://bombay-blokes.myshopify.com"),[u,h]=(0,o.useState)("shpat_c2cebc3d9e82383a890ed78a12345"),p=async()=>{c(!0),a("Fetching products...");try{let e=await l.A.get("".concat(i,"/admin/api/2023-10/products.json"),{headers:{"X-Shopify-Access-Token":u}});e.data&&e.data.products?(t(e.data.products),a("".concat(e.data.products.length," products fetched."))):a("No products found.")}catch(e){e.response?(console.error("Error response:",e.response),429===e.response.status?a("Rate limit exceeded. Please try again later."):404===e.response.status?a("Store not found or invalid API key."):a("Failed to fetch products.")):e.request?(console.error("Error request:",e.request),a("No response from the server.")):(console.error("Error message:",e.message),a("An unexpected error occurred."))}finally{c(!1)}};return(0,r.jsxs)("div",{className:"mt-10 w-full max-w-md",children:[(0,r.jsx)("button",{onClick:p,className:"w-full bg-blue-600 text-white rounded py-2 px-4 hover:bg-blue-700 transition",children:"Fetch Products"}),(0,r.jsx)("p",{className:"mt-4 text-center text-gray-700",children:s}),n&&(0,r.jsx)("p",{children:"Loading products..."}),e.length>0&&(0,r.jsx)("ul",{children:e.map(e=>(0,r.jsx)("li",{className:"my-2",children:(0,r.jsx)("strong",{children:e.title})},e.id))})]})},c=()=>{let[e,t]=(0,o.useState)(""),[s,l]=(0,o.useState)(""),[c,i]=(0,o.useState)(""),d=(0,a.useRouter)();(0,o.useEffect)(()=>{{let e=sessionStorage.getItem("shopifyStoreUrl"),s=sessionStorage.getItem("shopifyApiKey");e&&s&&(t(e),l(s))}},[]);let u=async()=>{if(!e||!s)return i("Please provide both Store URL and API Key.");i("Testing connection...");try{let t=await fetch("/api/test-connection",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({storeUrl:e,apiKey:s})}),r=await t.json();t.ok?(sessionStorage.setItem("shopifyStoreUrl",e),sessionStorage.setItem("shopifyApiKey",s),i("Connection successful! Redirecting..."),setTimeout(()=>{d.push("/upload")},1500)):i("Connection failed: ".concat(r.error))}catch(e){i("Connection failed: ".concat(e.message))}};return(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50 flex flex-col items-center justify-center",children:[(0,r.jsxs)("header",{className:"bg-blue-600 text-white w-full py-6 shadow-lg text-center",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold",children:"Shopify Folder Upload Tool"}),(0,r.jsx)("p",{className:"text-lg mt-2",children:"Connect your store to start uploading images with ease"})]}),(0,r.jsxs)("main",{className:"bg-white shadow-md rounded-lg p-8 w-full max-w-md mt-10",children:[(0,r.jsx)("h2",{className:"text-2xl font-semibold text-gray-800 mb-4 text-center",children:"Connect Your Shopify Store"}),(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsx)("label",{htmlFor:"storeUrl",className:"block text-sm font-medium text-gray-700 mb-1",children:"Shopify Store URL"}),(0,r.jsx)("input",{id:"storeUrl",type:"url",value:e,onChange:e=>t(e.target.value),placeholder:"https://yourstore.myshopify.com",className:"block w-full border border-gray-300 rounded p-2 focus:ring-blue-500 focus:border-blue-500",pattern:"https://.*",required:!0})]}),(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsx)("label",{htmlFor:"apiKey",className:"block text-sm font-medium text-gray-700 mb-1",children:"API Key"}),(0,r.jsx)("input",{id:"apiKey",type:"text",value:s,onChange:e=>l(e.target.value),placeholder:"Your Shopify API Key",className:"block w-full border border-gray-300 rounded p-2 focus:ring-blue-500 focus:border-blue-500",required:!0})]}),(0,r.jsx)("button",{onClick:u,className:"w-full bg-blue-600 text-white rounded py-2 px-4 hover:bg-blue-700 transition",children:"Test Connection"}),(0,r.jsx)("p",{className:"mt-4 text-center text-gray-700",children:c})]}),(0,r.jsx)("div",{className:"mt-10 w-full max-w-md",children:(0,r.jsx)(n,{storeUrl:e,apiKey:s})}),(0,r.jsx)("footer",{className:"bg-gray-800 text-white w-full py-4 mt-auto text-center",children:(0,r.jsx)("p",{children:"\xa9 2024 Shopify Folder Upload Tool. All rights reserved."})})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[238,441,517,358],()=>t(2035)),_N_E=e.O()}]);